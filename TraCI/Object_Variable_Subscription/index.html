<p><strong>FORCETOC</strong></p>

<h1 id="introduction">Introduction</h1>

<p>Variable subscriptions allow you to ask once for a set of a structure’s variables and retrieve them periodically. In accordance to plain value retrieval commands (0xa0-0xae) the subscription commands are split by the “domain” - the type of the structure:</p>

<ul>
  <li>command 0xd0: retrieve information from an induction loop (for a list of retrievable variables, see <a href="/TraCI/Induction_Loop_Value_Retrieval" title="wikilink">Induction Loop Value Retrieval</a>)</li>
  <li>command 0xd1: retrieve information from a multi-entry/multi-exit detector (see <a href="/TraCI/Multi-Entry-Exit_Detectors_Value_Retrieval" title="wikilink">Multi-Entry-Exit Detectors Value Retrieval</a>)</li>
  <li>command 0xd2: retrieve information from a traffic light (see <a href="/TraCI/Traffic_Lights_Value_Retrieval" title="wikilink">Traffic Lights Value Retrieval</a>)</li>
  <li>command 0xd3: retrieve information from a lane (see <a href="/TraCI/Lane_Value_Retrieval" title="wikilink">Lane Value Retrieval</a>)</li>
  <li>command 0xd4: retrieve information from a vehicle (see <a href="/TraCI/Vehicle_Value_Retrieval" title="wikilink">Vehicle Value Retrieval</a>)</li>
  <li>command 0xd5: retrieve information from a vehicle type (see <a href="/TraCI/VehicleType_Value_Retrieval" title="wikilink">Vehicle Type Value Retrieval</a>)</li>
  <li>command 0xd6: retrieve information from a route (see <a href="/TraCI/Route_Value_Retrieval" title="wikilink">Route Value Retrieval</a>)</li>
  <li>command 0xd7: retrieve information from a point-of-interest (see <a href="/TraCI/POI_Value_Retrieval" title="wikilink">PoI Value Retrieval</a>)</li>
  <li>command 0xd8: retrieve information from a polygon (see <a href="/TraCI/Polygon_Value_Retrieval" title="wikilink">Polygon Value Retrieval</a>)</li>
  <li>command 0xd9: retrieve information from a junction (see <a href="/TraCI/Junction_Value_Retrieval" title="wikilink">Junction Value Retrieval</a>)</li>
  <li>command 0xda: retrieve information from an edge (see <a href="/TraCI/Edge_Value_Retrieval" title="wikilink">Edge Value Retrieval</a>)</li>
  <li>command 0xdb: retrieve information from the simulation (see <a href="/TraCI/Simulation_Value_Retrieval" title="wikilink">Simulation Value Retrieval</a>)</li>
</ul>

<p>The subscription for a structure’s variables is initiated using a “Subscribe … Variable” command (0xd0-0xde). The command is evaluated immediately on request, verifing it this way. It returns a “Subscribe … Variable” response (0xe0-0xee). In the case of vehicles, the subscription is descheduled as soon as the vehicle leaves the simulation.</p>

<p>As soon as the subscription was accepted, it is executed after each call of <a href="/TraCI/Control-related_commands#Command_0x02:_Simulation_Step.282.29" title="wikilink">Simulation Step(2)</a> command.</p>

<h1 id="command-0xdx-subscribe--variable">Command 0xd<i>X</i>: Subscribe … Variable</h1>

<table>
  <thead>
    <tr>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">time</td>
      <td style="text-align: center">time</td>
      <td style="text-align: center">string</td>
      <td style="text-align: center">ubyte</td>
      <td style="text-align: center">ubyte[n]</td>
    </tr>
    <tr>
      <td style="text-align: center">begin Time</td>
      <td style="text-align: center">end Time</td>
      <td style="text-align: center">Object ID</td>
      <td style="text-align: center">Variable Number</td>
      <td style="text-align: center">The list of variables to return</td>
    </tr>
  </tbody>
</table>

<p>Some notes:</p>

<ul>
  <li>begin Time: the subscription is executed only in time steps &gt;= this value; in ms</li>
  <li>end Time: the subscription is executed in time steps &lt;= this value; the subscription is removed if the simulation has reached a higher time step; in ms</li>
  <li>The size of the variables list must be equal to the field “Variable Number”.</li>
</ul>

<h1 id="response-0xex--subscription-response">Response 0xe<i>X</i>: … Subscription Response</h1>

<table>
  <thead>
    <tr>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">string</td>
      <td style="text-align: center">ubyte</td>
      <td style="text-align: center">ubyte</td>
      <td style="text-align: center">ubyte</td>
      <td style="text-align: center">ubyte</td>
      <td style="text-align: center"><return_type></return_type></td>
      <td style="text-align: center">…</td>
      <td style="text-align: center">ubyte</td>
      <td style="text-align: center">ubyte</td>
      <td style="text-align: center">ubyte</td>
      <td style="text-align: center"><return_type></return_type></td>
    </tr>
    <tr>
      <td style="text-align: center">Object ID</td>
      <td style="text-align: center">Variable Count</td>
      <td style="text-align: center">Variable #1 Id</td>
      <td style="text-align: center">Variable #1 status</td>
      <td style="text-align: center">Return type of the variable #1</td>
      <td style="text-align: center">&lt;VARIABLE_VALUE#1&gt;</td>
      <td style="text-align: center">…</td>
      <td style="text-align: center">Variable #n Id</td>
      <td style="text-align: center">Variable #n status</td>
      <td style="text-align: center">Return type of the variable #n</td>
      <td style="text-align: center">&lt;VARIABLE_VALUE#n&gt;</td>
    </tr>
  </tbody>
</table>

<p>The respond to a <strong>“Subscribe … Variable”</strong>.</p>

<p>The status is 0x00 (RTYPE_OK) if the variable could be retrieved successfully. If not, the status is 0xff (RTYPE_ERR). In the second case, the variable type is set to string and the variable value contains the error message.</p>

<p><strong><em>Variable Count</em></strong> is the number of subscriptions which are returned.</p>

<h1 id="client-library-methods">Client library methods</h1>

<ul>
  <li>In the <a href="/TraCI/Interfacing_TraCI_from_Python#Subscriptions" title="wikilink">python library</a>, all domains support the methods <a href="http://www.sumo.dlr.de/daily/pydoc/traci.domain.html#Domain"><em>subscribe</em> and <em>unsubscribe</em></a></li>
  <li>In the <a href="/TraCI/C%2B%2BTraCIAPI" title="wikilink">C++ library</a>, the method <em>simulation.subscribe</em> takes an additional argument that encodes the domain</li>
</ul>

<h1 id="special-cases">Special Cases</h1>

<ul>
  <li>The VAR_LEADER variable is special because the <em>getLeader (0x68)</em> command requires an additional distance argument. To subscribe to VAR_LEADER the function <em>subscribeLeader</em> is provided by the <a href="/TraCI/Interfacing_TraCI_from_Python" title="wikilink">python client</a>.</li>
</ul>
