<h2 id="angle">Angle</h2>

<p>A vehicle’s direction of drive is computed using the positions of the vehicle’s front and back:</p>

<p><code class="highlighter-rouge">p1 = vehicle's front position</code>
<code class="highlighter-rouge">p2 = vehicle's back position</code>
<code class="highlighter-rouge">if p1!=p2:</code>
<code class="highlighter-rouge">    angle = atan2(p1.x()-p2.x(), p2.y()-p1.y())*180./PI;</code>
<code class="highlighter-rouge">else:</code>
<code class="highlighter-rouge">    angle = lane's angle at vehicle's front</code></p>

<p>The check for <code class="highlighter-rouge">p1!=p2</code> is necessary as the lane’s used length may differ from the lane’s geometrical length. Not regarding this caused vehicles to change the direction of drive to 0°, reported as <a href="http://sourceforge.net/apps/trac/sumo/ticket/430">ticket#430</a>.</p>

<p>The following image shows how the resulting encoding.</p>

<p><a href="/Image:vehicle_angle.png" title="wikilink">Image:vehicle_angle.png</a></p>
