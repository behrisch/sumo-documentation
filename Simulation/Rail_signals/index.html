<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Simulation Rail signals | Eclipse SUMO - Documentation</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Simulation Rail signals" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here 12345. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here 12345. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="/sumo-documentation/Simulation/Rail_signals/" />
<meta property="og:url" content="/sumo-documentation/Simulation/Rail_signals/" />
<meta property="og:site_name" content="Eclipse SUMO - Documentation" />
<script type="application/ld+json">
{"description":"Write an awesome description for your new site here 12345. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","@type":"WebPage","url":"/sumo-documentation/Simulation/Rail_signals/","headline":"Simulation Rail signals","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/sumo-documentation/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/sumo-documentation/feed.xml" title="Eclipse SUMO - Documentation" /></head>
<body><header class="site-header">

    <div class="wrapper"><a class="site-title" rel="author" href="/sumo-documentation/">Eclipse SUMO - Documentation</a><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger" />
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewBox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
              </svg>
            </span>
          </label>
  
        </nav></div>
  </header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Simulation Rail signals</h1>
    <p class="post-meta">
      
    <a href="https://github.com/angelobanse/sumo-documentation/edit/master/docs/Simulation/Rail_signals.md">Edit on GitHub</a></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Rail signals are <a href="/Networks/Building_Networks_from_own_XML-descriptions#Node_Descriptions" title="wikilink">node</a> types for controllig rail traffic.</p>

<h1 id="loading-a-rail-signal">Loading a rail signal</h1>

<p>One simply has to define a node to have the <span class="inlxml">type</span> <em>rail_signal</em>, as in the following example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;nodes&gt; &lt;!-- The opening tag --&gt;

   &lt;node id="1" x="-500.0" y="0.0" type="rail_signal"/&gt;
   &lt;node id="2" x="+500.0" y="0.0" type="rail_signal"/&gt;

&lt;/nodes&gt; &lt;!-- The closing tag --&gt;
</code></pre></div></div>

<h1 id="usage">Usage</h1>

<p>If one uses a rail network (here, we mean a network consisting exclusively of <a href="/Networks/Building_Networks_from_own_XML-descriptions#Edge_Descriptions" title="wikilink">edges that allow only</a> trains) within its simulation, it is not required to use rail signals. Instead one could choose all junctions withing this network to be of the type <em>priority</em>, which results, however, in an unrealistic behaviour of the rail traffic. To achieve a more realistic behaviour, one can make use of rail signals. For that, one can split a longer rail section without any junctions in between into so called <em>blocks</em>, by choosing nodes within this section to have rail signals. Then, a <em>block</em> is the set of edges between two rail signals. The rail signal will then indicate green (we use green and red as for traffic lights) if there is no train in the block after the rail signal. A train will move from one block to the next one, and each time it wants to enter a block, the rail signal will state if this block is free and the train is allowed to enter, or if the block is occupied and the train has to wait until the block is empty.</p>

<p>If one uses one rail signal within its simulation, it is required to use rail signals for every junction/railroad switch with more than two tracks for which there exists a path from an existing rail signal. Otherwise, a warning will be issued. This is required as a rail signal depends on its adjacent rail signals (or rather the blocks between the adjacent rail signals and itself). For rail sections without junctions/railroad switches, one can split them into as many blocks as one desires, but a block length of a few hundred metres can be reasonable size. Too large block lengths can result in long waiting tims for trains waiting to enter a block. Too short block lengths can result in trains following each other very closely.</p>

<h1 id="behaviour">Behaviour</h1>

<p>Rail signals are essentially traffic lights, however their state does not depend on TLS-programs. Instead, the state of a rail signal depends on the occupation of certain blocks. At every simulation step, the state of a rail signal will be updated based on the occupation.</p>

<p>The logic of the rail signals shall guarantee the following points:</p>

<ul>
  <li>Each block of a rail network is occupied by at most one train.</li>
  <li>If several trains approach the same junction/railroad switch from different lanes/edges and want to enter the same lane, at most one of these trains gets a green signal and all other trains get a red signal, even before one of these trains has entered the targeted lane. This will avoid that trains approach a rail signal with high velocity and receive suddently a red signal without having enough space to break before the rail signal.</li>
</ul>

<p>A rail signal indicates green or red for each <a href="/Networks/Building_Networks_from_own_XML-descriptions#Connection_Descriptions" title="wikilink">connection</a> of the node individually. A connection <em>c</em> consists of one incoming lane <em>i</em> and one outgoing lane <em>o</em>. The signal for <em>c</em> depends on the occupation of:</p>

<ul>
  <li>The outgoing block. That is the block leading from the current rail signal over <em>o</em> to the next rail signal.</li>
  <li>All blocks leading to <em>o</em>. A block leading to <em>o</em> is a block that is leading to the current rail signal for whose last lane there exists a connection to <em>o</em>. Clearly, the block to which <em>i</em> belongs is one of the blocks leading to <em>o</em>. We denote the set of the blocks leading to <em>o</em> by <em>O</em>.</li>
</ul>

<table>
  <tbody>
    <tr>
      <td>If there is only one block leading to <em>o</em>, namely the one <em>i</em> belongs to, the signal of <em>c</em> is green if and only if the outgoing block of <em>c</em> is not occupied by a train. If there is more than one block leading to <em>o</em>, i.e. *</td>
      <td>O</td>
      <td>&gt;1<em>, we consider all connections to *o</em>. These connections correspond exactly to the blocks in <em>O</em>, and we denote the set of these connections by <em>C</em>. Moreover, we denote the set of connections in <em>C</em>, whose corresponding approaching blocks are occupied, by <em>D</em>. If the outgoing block of <em>c</em> is occupied by a train, then the signals for all connections in <em>C</em> are red. If the outgoing block of <em>c</em> is not occupied by a train and all blocks leading to <em>o</em> are not occupied, i.e. *</td>
      <td>D</td>
      <td>=0<em>, then the signals for all connections in *C</em> are green. If the outgoing block of <em>c</em> is not occupied by a train, and at least one block leading to <em>o</em> is occpuied by a train, i.e. *</td>
      <td>D</td>
      <td>&gt;0<em>, then exactly one connetion in *D</em> has a green signal and all other connections in <em>C</em> have a red signal.</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>[thump</td>
      <td>600px](/Image:outgoing_rail.png “wikilink”)</td>
    </tr>
  </tbody>
</table>

<p>Fig. 1: A rail signal for a railroad switch with one incoming lane from the left and three outgoing lanes to the right. The signal for the occupied outgoing block is red, all other signals green.</p>

<table>
  <tbody>
    <tr>
      <td>[thump</td>
      <td>600px](/Image:incoming_rail.png “wikilink”)</td>
    </tr>
  </tbody>
</table>

<p>Fig. 2: A rail signal for a railroad switch with three incoming lanes from the left and one outgoing lane to the right. As all approaching blocks are occupied, only one signals is green.</p>

<h1 id="output">Output</h1>

<p>For logging the states of a rail signal, the same method as for <a href="/Simulation/Output/Traffic_Lights#TLS_States" title="wikilink">logging TLS states of traffic lights</a> can be used. The attribute <span class="inlxml">source</span> has to be the ID of the junction the rail signal belongs to.</p>

  </div><a class="u-url" href="/sumo-documentation/Simulation/Rail_signals/" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/sumo-documentation/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Eclipse SUMO - Documentation</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Eclipse SUMO - Documentation</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://www.twitter.com/eclipseSUMO"><svg class="svg-icon"><use xlink:href="/sumo-documentation/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">eclipseSUMO</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here 12345. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
