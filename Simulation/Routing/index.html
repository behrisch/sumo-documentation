<h1 id="features-that-cause-rerouting">Features that cause rerouting</h1>

<p>There are multiple simulation features that allow routing at simulation time. They are described in the following:</p>

<h2 id="routing-triggered-by-the-vehicle">Routing triggered by the vehicle</h2>

<p>This type of routing works by assigning a <em>rerouting device</em> to some or all vehicles. Details are given at <a href="/Demand/Automatic_Routing" title="wikilink">Demand/Automatic_Routing</a>.</p>

<h2 id="incomplete-trips-and-flows">Incomplete Trips and Flows</h2>

<p>This is a special case of the above method. Vehicles with incomplete routes automatically receive a <em>rerouting device</em> and are rerouted once when entering the network. In some scenarios this is a practical <a href="/Demand/Dynamic_User_Assignment#oneShot-assignment" title="wikilink"><em>one-shot</em>-approach to route assignment</a> that avoids time-consuming <a href="/Demand/Dynamic_User_Assignment#General_behavior" title="wikilink">iterative assignment</a>.</p>

<h2 id="alternative-route-signage">Alternative Route Signage</h2>

<p>This is a location based method for triggering rerouting and is described at <a href="/Simulation/Rerouter" title="wikilink">Simulation/Rerouter</a>.</p>

<h2 id="traci">TraCI</h2>

<p>Using the methods <a href="/TraCI/Change_Vehicle_State" title="wikilink"><em>change target</em> or <em>reroute</em></a> rerouting is triggered for the specified vehicle.</p>

<h1 id="alternative-destinations">Alternative Destinations</h1>

<p>By using <a href="/Simulation/Rerouter" title="wikilink">-definitions</a>, vehicles can be routed to alternative destinations. A different method is to use <a href="/Definition_of_Vehicles,_Vehicle_Types,_and_Routes#Traffic_assignement_zones_.28TAZ.29" title="wikilink">traffic assignment zones (TAZ)</a>. This allows vehicles to change their destination to the best alternative from a list of potential destinations.</p>

<h1 id="travel-time-values-for-routing">Travel-time values for routing</h1>

<p>By default, the route with the least travel time is chosen. The following order of steps is taken to retrieve the travel time for each edge (If one step fails due to lack of data, the next step is taken):</p>

<ol>
  <li>The vehicle retrieves it’s individual data storage. This can be set and retrieved using the TraCI vehicle methods <a href="/TraCI/Change_Vehicle_State#change_edge_travel_time_information_.280x58.29" title="wikilink"><em>change edge travel time information</em></a> and <a href="/TraCI/Vehicle_Value_Retrieval#edge_travel_time_information_.280x58.29" title="wikilink"><em>edge travel time information</em></a>.</li>
  <li>The <a href="/Demand/Shortest_or_Optimal_Path_Routing#Custom_edge_weights" title="wikilink">global edge weights</a> loaded using option are retrieved.</li>
  <li>The global edge weights (set and retrieved via TraCI) using the TraCI edge methods <a href="/TraCI/Change_Edge_State" title="wikilink"><em>change edge travel time information</em></a> and <a href="/TraCI/Edge_Value_Retrieval" title="wikilink"><em>edge travel time information</em></a>.</li>
  <li>The minimum travel time (length/allowedSpeed) is used.</li>
</ol>

<h2 id="special-cases">Special cases</h2>

<ul>
  <li>When rerouting with the <em>rerouting device</em> the travel time always comes from another data storage which is updated continuously with a configurable averaging procedure. The <a href="/Demand/Automatic_Routing" title="wikilink">parameters for this updating strategy are user definable</a>. It is also possible to <a href="/TraCI/Change_Vehicle_State#Supported_Device_Parameters" title="wikilink">set the device travel time directly via TraCI</a>.</li>
  <li>When using the TraCI method rerouteTraveltime from the <a href="/TraCI/Interfacing_TraCI_from_Python" title="wikilink">python TraCI library</a>, the command supports an additional boolean parameter <em>currentTravelTime</em> (default <em>True</em>). When this parameter is set to <em>True</em>, the global edge weights are replaced by to the currently measured travel times before rerouting. To replicate this behavior with other TraCI clients, all edges in the network must be called with <em>change global travel time information</em> using the value of <em>current travel time</em>. Note that the travel time values which are set in this way are used for the full duration of the simulation unless updated again.</li>
</ul>

<h1 id="routing-by-effort">Routing by <em>effort</em></h1>

<p>When setting the option , additional routing efforts are read according to the specified attribute. These are only used when calling the TraCI function <a href="/TraCI/Change_Vehicle_State" title="wikilink">reroute by effort</a>. The assumed efforts along a vehicles route are are time-based values and the time is computed based on the travel time values described above.</p>

<h1 id="routing-algorithms">Routing Algorithms</h1>

<p>Applications that perform routing (<a href="/SUMO" title="wikilink">SUMO</a>, <a href="/SUMO-GUI" title="wikilink">SUMO-GUI</a>, <a href="/DUAROUTER" title="wikilink">DUAROUTER</a>, <a href="/MAROUTER" title="wikilink">MAROUTER</a>) support the option for selecting among the following values:</p>

<ul>
  <li><em>dijkstra</em>: (default) <a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">Dijkstras</a> algorithm is the simplest and slowest of routing algorithms. It is well suited to routing in time-dependent networks (i.e. when the travel time on an edge depends on the time of day)</li>
  <li><em>astar</em>: The <a href="https://en.wikipedia.org/wiki/A*_search_algorithm">A*</a> routing algorithm uses a metric for bounding travel time to direct the search and is often faster than dijkstra. Here, the metric ‘‘euclidean distance / maximumVehicleSpeed) is used.
    <ul>
      <li>by using <em>astar</em> together with the option the ALT-Algorithm is activated (A*, Landmarks, triangle inequality). It uses a precomputed distance table to selected network edges (so-called landmarks) to speed up the search, often by a significant factor.</li>
      <li>by using <em>astar</em> together with the option the A* algorithm is used together with a complete (and often huge) distance table to allow for blazing fast search.</li>
    </ul>
  </li>
  <li><em>CH</em>: <a href="https://en.wikipedia.org/wiki/Contraction_hierarchies">Contraction Hierarchies</a> is preprocessing-based routing algorithm. This is very efficient when a large number of queries is expected. The algorithm does consider time-dependent weights. Instead, new preprocessing can be performed for time-slices of fixed size by setting the option . The preprocessing is done without restrictions on vehicle class which reduces efficiency in multi-modal networks.</li>
  <li><em>CHWrapper</em>: This works like <em>CH</em> but performs separate preprocessing for every vehicle class that is encountered, thereby increasing routing efficiency.</li>
</ul>
