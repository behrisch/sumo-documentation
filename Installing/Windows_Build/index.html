<p>This document describes how to build SUMO under MS-Windows using only freely available (this does <strong>not</strong> mean “open source”) tools. Instructions on how to build SUMO on Windows using an Open Source toolchain are included in our <a href="/Installing/Linux_Build" title="wikilink">building on Linux</a> pages. Please note that you may also <a href="/Downloads" title="wikilink">download pre-built Windows binaries</a>.</p>

<ul>
  <li>Download <a href="https://www.visualstudio.com/vs/community/">Visual C++ Community Edition</a>. SUMO is only compatible with Visual Studio 2013 or higher. If you are using Windows 8 or later be sure to download Visual Studio Express for Windows <em>Desktop</em>. Please install all the available Service Packs for Visual Studio as well. Note that with Visual Studio Express 2017 SUMO only can be compiled <strong>in Release Mode</strong>.</li>
  <li><a href="http://www.python.org/download/">Download Python for Windows</a> and install it. Our most preferred version is Python 2.7.x for the 32 bit platform, but you may try Python 3 and / or 64bit as well. Please be aware that the test environment needs Python 2.7</li>
  <li>Download and extract <a href="http://sumo.dlr.de/daily/sumo-src-git.zip">sumo-src-git.zip</a> or a different version (or use a repository checkout, see <a href="/Downloads" title="wikilink">Downloads</a>)</li>
  <li>Note on installation paths: MSVC seems to have difficulties with include and library paths containing spaces (for instance <code class="highlighter-rouge">C:\Program Files</code>). Thus try to avoid installing SUMO or any of the libraries in such paths.</li>
</ul>

<h2 id="libraries">Libraries</h2>

<p>We provide a central location for getting all dependent libraries at <a href="https://github.com/DLR-TS/SUMOLibraries">https://github.com/DLR-TS/SUMOLibraries</a>. The easiest way is to clone this repository and define an environment variable SUMO_LIBRARIES pointing to the resulting directory. They are built with Visual Studio 2017, but may be used with earlier and later versions as well. You may need to install the Visual C++ 2017 Runtime Distributable for running SUMO then (tested with Visual Studio 2013). For details on building your own and also on how to use different versions and additional libraries see <a href="/Installing/Windows_Libraries" title="wikilink">Installing/Windows_Libraries</a>. Now continue with the <a href="/Installing/Windows_CMake" title="wikilink">CMake build instructions</a>.</p>

<ul>
  <li>Add all directories containing dlls (XERCES\bin, PROJ_GDAL\bin, FOX16\lib) to your PATH or copy the dlls into a directory which is in your PATH.
    <ul>
      <li>If you build for 64 bit and for 32 bit be sure that you add both dirs and that you add the 64 bit dir before the 32 bit dir.</li>
    </ul>
  </li>
</ul>

<h2 id="tests">Tests</h2>

<ul>
  <li>If you plan to extend SUMO yourself, or just want to know whether everything compiled OK, it is strongly recommended to have a look at <a href="/Developer/Tests" title="wikilink">Developer/Tests</a>. This tool makes it easier to check whether some existing functionality was broken by the extensions.</li>
</ul>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="linker-reports-something-similar-to-link--fatal-error-lnk1104-cannot-open-file-cprogramobj">Linker reports something similar to “LINK : fatal error LNK1104: cannot open file ‘C:\Program.obj’”</h3>

<p>You probably have installed a library to a path containing white spaces in its name. In such a case, the according environment variable should be embedded in quotes (“).
Example: set FOX=”D:\my libs\fox-1.6.36”.</p>

<h3 id="failure-on-pre-build-event-missing-versionh-or-typemaph">Failure on pre-build event (missing version.h or *typemap.h)</h3>

<p>If Visual Studio reports a failed pre-build event you can safely ignore this, unless you are building from the <a href="/FAQ#How_do_I_access_the_code_repository.3F" title="wikilink">source code repository</a>. In this case you should probably install Python. Even if python is installed the file associations may be broken which causes the generation of src/version.h via tools/build/version.py to fail. Either repair your file associations or undefine HAVE_VERSION_H in src/windows_config.h.</p>

<p>If you did install Python correctly, double check that it passes <a href="http://stackoverflow.com/questions/2640971/windows-is-not-passing-command-line-arguments-to-python-programs-executed-from-t">command line arguments</a>. For a quick fix, you can also execute the following commands manually:</p>

<p><code class="highlighter-rouge">tools\build\version.py</code>
<code class="highlighter-rouge">tools\build\typemap.py</code></p>

<h3 id="execution-cannot-proceed-because-msvcr120dllmsvcr140dll-was-not-found">Execution cannot proceed because MSVCR120.dll/MSVCR140.dll was not found</h3>

<p>Install Microsoft <a href="https://www.microsoft.com/en-US/download/details.aspx?id=30679">Visual C++ Redistributable Packages for Visual Studio 2012</a> (for MSVCR120.dll) or <a href="https://www.visualstudio.com/downloads/">Microsoft Visual C++ Redistributable Packages for Visual Studio 2015</a> (for MSVCR140.dll). You can check if all dependences are correct using <a href="https://lucasg.github.io/Dependencies/">Dependencies</a></p>

<p>Image:Dependencies.png</p>

<h3 id="in-debug-mode-execution-cannot-proceed-because-msvcr120ddllmsvcr140ddll-was-not-found">In debug mode, execution cannot proceed because MSVCR120D.dll/MSVCR140D.dll was not found</h3>

<p>Your version of Visual Studio doesn’t support Debugging, only can be compiled in release mode.</p>

<h2 id="available-configurations">Available configurations</h2>

<p>The release build is used for the distribution of sumo. The Debug build allows all debugging features. Keep in mind that <a href="/Developer/Tests" title="wikilink">Texttest</a> usually picks up the release build.</p>

<ul>
  <li>Release: All optimizations, assertions disabled, no debugging symbols, links against external release libs</li>
  <li>Debug: No optimizations, assertions enabled, debugging symbols included, links against external debug libs</li>
</ul>

<p>Left clicking over Solution/Properties/Configuration Manager allow to change between configurations:</p>

<p>Image:swichDebugRelease.png</p>

<p>To switch to a different platform (e.g. 32bit instead of 64 bit) please run cmake again with a different generator.</p>

<p>Naming Conventions: 64bit executables have the same name as their 32bit counterpart. The Debug build additionally carries the suffix ‘D’.</p>
