<p>Containers can be used to simulated freight and goods. A container can represent, for example, an ISO container, a tank container, an arbitrary amount of bulk material, an arbitrary amount of animals etc.</p>

<h1 id="containers">Containers</h1>

<p>A container moves through the net by being transported by a vehicle or being transhiped between two stops. A container element has child elements defining stages of its plan. The stages are a connected sequence of <a href="/Specification/Containers#Transports" title="wikilink">transport</a>, <a href="/Specification/Containers#Tranships" title="wikilink">tranship</a> and <a href="/Specification/Containers#Stops" title="wikilink">stop</a> elements as described below. Each container must have at least one stage in its plan.</p>

<container id="foo" depart="0">
`    `<tranship edges="a b" />
`    `&lt;transport ../&gt;
`    `&lt;transport ../&gt;
`    `&lt;tranship ../&gt;
`    `&lt;stop ../&gt;
</container>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Type</th>
      <th>Range</th>
      <th>Default</th>
      <th>Remark</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>string</td>
      <td>valid XML ids</td>
      <td>-</td>
      <td> </td>
    </tr>
    <tr>
      <td>depart</td>
      <td>float(s)</td>
      <td>≥0</td>
      <td>-</td>
      <td> </td>
    </tr>
    <tr>
      <td>type</td>
      <td>string</td>
      <td>any decelared vType</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>color</td>
      <td>rgb color</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="visualization">Visualization</h2>

<p>Containers are rendered in the GUI with the configured detail-level. When assigning a type with attribute <em>imgFile</em>, the container may be rendered with an image.</p>

<h1 id="simulation-input">Simulation input</h1>

<h2 id="transports">Transports</h2>

<p>Transports define the start and end point of a movement with a single mode of transport (e.g. a truck, train or a ship). They are child elements of plan definitions.</p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Type</th>
      <th>Range</th>
      <th>Default</th>
      <th>Remark</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>from</td>
      <td>string</td>
      <td>valid edge ids</td>
      <td>-</td>
      <td>id of the start edge</td>
    </tr>
    <tr>
      <td>to</td>
      <td>string</td>
      <td>valid edge ids</td>
      <td>-</td>
      <td>id of the destination edge</td>
    </tr>
    <tr>
      <td>lines</td>
      <td>list</td>
      <td>valid line or vehicle ids</td>
      <td>-</td>
      <td>list of vehicle alternatives to take for the transport</td>
    </tr>
  </tbody>
</table>

<p>the route to take is defined by the vehicle.</p>

<h2 id="tranships">Tranships</h2>

<p>Tranships define a direct transfer of containers between two points. Thereby, containers do not move along edges. They move in a straight line, no matter if the line is crossing buildings or anything else. They are child elements of plan definitions.</p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Type</th>
      <th>Range</th>
      <th>Default</th>
      <th>Remark</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>edges</td>
      <td>list</td>
      <td>valid edge ids</td>
      <td>-</td>
      <td>id of the edges to tranship</td>
    </tr>
    <tr>
      <td>from</td>
      <td>string</td>
      <td>valid edge ids</td>
      <td>-</td>
      <td>id of the start edge</td>
    </tr>
    <tr>
      <td>to</td>
      <td>string</td>
      <td>valid edge ids</td>
      <td>-</td>
      <td>id of the destination edge</td>
    </tr>
    <tr>
      <td>speed</td>
      <td>float(m/s)</td>
      <td>&gt;0</td>
      <td>-</td>
      <td> </td>
    </tr>
    <tr>
      <td>departPos</td>
      <td>float(m)</td>
      <td> </td>
      <td>0</td>
      <td>initial position on the starting edge</td>
    </tr>
    <tr>
      <td>arrivalPos</td>
      <td>float(m)</td>
      <td> </td>
      <td>-1</td>
      <td>arrival position o the destination edge</td>
    </tr>
  </tbody>
</table>

<p>You can define either a list of “edges” to travel or a “from” and a “to” edge. In the former case, only the first and the last edge will be considered. The container will move straight from the first edge to last edge. In the latter case, the container will from straight from the edge “from” to the edge “to”.</p>

<h2 id="stops">Stops</h2>

<p>Stops define a delay until the next element of a plan is started. They can be used to model containers beeing stored in a storage place, harbour or anything else. A <a href="/Specification/Logistics#Container_stops" title="wikilink">container stop</a> can be used to modal that storage place in the network (similar to a <a href="/Simulation/Public_Transport" title="wikilink">bus stop for public transport</a>. Stops for containers follow the specification at <a href="/Specification#Stops" title="wikilink">Specification#Stops</a>. However, only the attributes <em>lane</em>, <em>duration</em>, <em>until</em> and <em>startPos</em> are evaluated. <em>startPos</em> defines the position on the lane where the container is supposed to stop. Using these attributes it is possible to model activities with a fixed duration as well as those with a fixed end time.</p>

<h1 id="simulation-behavior">Simulation behavior</h1>

<p>A container is starting its life at its depart time on the source (resp. first) edge of the first tranship, transport or stop. It tries to start the next step of its plan.</p>

<h2 id="transport">Transport</h2>

<p>The container checks whether a vehicle with a line from the given list is stopping at the given edge. If such a vehicle exists and the container is positioned between the start and end position of the vehicle’s stop, the container will be laoded onto the vehicle. If such a vehicle exists but the container is not positioned between the start and end position of the vehicle’s stop, the container will still be loaded if the vehicle is triggered by the a container and the distance between container and vehicle is at most 10 metres. It will not be checked whether the vehicle has the aspired destination on the current route. The first time the vehicle stops (on a well defined stop) at the destination edge, the transport is finished and the container proceeds with the next step in the plan.</p>

<h2 id="tranship">Tranship</h2>

<p>The container moves from the “departPos” of the “from” edge to the “arrivalPos” of the “to” edge. Thereby, the container is not following edges. Instead, it makes a straight movement between these two points. Any obstacles, like buildings, will be ignored.</p>

<h2 id="stopping">Stopping</h2>

<p>The container stops for the maximum of <em>currentTime+duration</em> and <em>until</em>.</p>

<h1 id="example">Example</h1>

<p>The following is an example for a container which gets transhiped to a train station, gets transported by a train, gets unloaded and transhiped to a place, where it’s stored (stopped) for some time and finally gets transported again.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;routes&gt;
    &lt;container id="container0" depart="0"&gt;
        &lt;tranship from="2/3to1/3" to="1/3to0/3" departPos="80" arrivalPos="55"/&gt;
        &lt;transport from="1/3to0/3" to="0/4to1/4" lines="train0"/&gt;
        &lt;tranship from="0/4to1/4" to="1/4to2/4" arrivalPos="30"/&gt;
        &lt;stop lane="1/4to2/4_0" duration="20" startPos="40"/&gt;
        &lt;transport from="1/4to2/4" to="3/4to4/4" lines="truck0"/&gt;
    &lt;/container&gt;

    &lt;vehicle id="train0" depart="50"&gt;
        &lt;route edges="1/4to1/3 1/3to0/3 0/3to0/4 0/4to1/4 1/4to1/3"/&gt;
        &lt;stop containerStop="containerStop0" until="120" duration="10"/&gt;
        &lt;stop containerStop="containerStop1" until="180" duration="10"/&gt;
    &lt;/vehicle&gt;

    &lt;vehicle id="truck0" depart="containerTriggered"&gt;
        &lt;route edges="1/4to2/4 2/4to3/4 3/4to4/4" departPos="30"/&gt;
        &lt;stop lane="1/4to2/4_0" duration="20" startPos="40" endPos="60"/&gt;
    &lt;/vehicle&gt;

&lt;/routes&gt;
</code></pre></div></div>

<h1 id="planned-featues">Planned featues</h1>

<p>The following features are not yet implemented.</p>

<h2 id="plan">Plan</h2>

<p>A containers plan has the same role as a vehicles route: A container may reference a plan or a distribution of plans using the attribute <span class="inlxml">plan</span>. Likewise, a container may include a plan or a distribution of plans as a child element. A plan is a sequence of stages (transports, tranships and <a href="/Specification#Stops" title="wikilink">stops</a>).</p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Type</th>
      <th>Range</th>
      <th>Default</th>
      <th>Remark</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>probability</td>
      <td>float</td>
      <td>≥0</td>
      <td>1</td>
      <td>this is only evaluated if a container has multiple plans, the probability values of all plans do not have to add to 1, they are scaled accordingly before choosing</td>
    </tr>
  </tbody>
</table>

<h2 id="containerflow">ContainerFlow</h2>

<p>A containerFlow has the same role as a flow. It allows to specify a sequence of containers with the same plan (or distribution of plans) with a single input element.</p>

<h2 id="intermodal-routing">Intermodal Routing</h2>

<p>The router input is still not completely defined. There has to be a possibility to define for the trips which vehicles / logistic lines may be used at all and for which vehicles the route can be defined / changed by the container.</p>

<h3 id="trips">Trips</h3>

<p>Trips define the start and end point of a movement with optional changes in mode.</p>

<p>In definition they are identical to <a href="/Specification#Vehicles" title="wikilink">vehicles</a> except for the missing route information (no route attribute and no route child is allowed). Instead they have the following attributes</p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Type</th>
      <th>Range</th>
      <th>Default</th>
      <th>Remark</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>from</td>
      <td>string</td>
      <td>valid edge ids</td>
      <td>-</td>
      <td>id of the start edge</td>
    </tr>
    <tr>
      <td>to</td>
      <td>string</td>
      <td>valid edge ids</td>
      <td>-</td>
      <td>id of the destination edge</td>
    </tr>
  </tbody>
</table>

